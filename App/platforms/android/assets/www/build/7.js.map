{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/components/components.module.ts","../../src/components/project-card/project-card.ts","../../src/pages/search/search.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAwE;AAI/B;AACO;AACV;AAatC,IAAa,gBAAgB;IAA7B;IAAgC,CAAC;IAAD,uBAAC;AAAD,CAAC;AAApB,gBAAgB;IAX5B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,2DAAU;SACX;QACD,OAAO,EAAE;YACP,uFAAgB;YAChB,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;SACrC;QACD,eAAe,EAAE,EAChB;KACF,CAAC;GACW,gBAAgB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;ACnBe;AACH;AAC0B;AAMnE,IAAa,gBAAgB;IAA7B;IAAgC,CAAC;IAAD,uBAAC;AAAD,CAAC;AAApB,gBAAgB;IAL5B,uEAAQ,CAAC;QACT,YAAY,EAAE,CAAC,wFAAoB,CAAC;QACpC,OAAO,EAAE,CAAC,kEAAW,CAAC;QACtB,OAAO,EAAE,CAAC,wFAAoB,CAAC;KAC/B,CAAC;GACW,gBAAgB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;ACRkB;AACE;AAC2C;AAG5F;;;;;GAKG;AAwBH,IAAa,oBAAoB;IAM/B;QACE,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;QACpD,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC;IAC5B,CAAC;IAEH,2BAAC;AAAD,CAAC;AATU;IAAR,oEAAK,EAAE;8BAAU,8DAAO;qDAAC;AAFf,oBAAoB;IAvBhC,wEAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,WAAW,EAAqB;QAChC,gFAAU,CAAE;YACV,8EAAQ,mFAAe,EAAE;gBACvB,+EAAU,EAAE,KAAK,CAAC,EAAE,KAA8B;gBAClD,gFAAW,oFAAa;oBACtB,8EAAQ,EAAG,EAAE,SAAS,CAAC;wBACrB,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,mBAAmB,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;wBAChE,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,kBAAkB,EAAE,MAAM,EAAE,GAAM;uBACH;mBAC7D;+FACH;gBACF,gFAAW,oFAAa;oBACtB,8EAAQ,EAAG,EAAE,SAAS,CAAC;wBACrB,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,eAAe,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;wBAC5D,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,mBAAmB,EAAE,MAAM,EAAE,GAAG,EAAG;uBACD;kBAChE;cACH;SACF;OACH;KACF,CAAC;;AAYD;SAXY,oBAAoB,W;;;;;;;;;;;;;;;;;;;;;;;;AChC2D;AAE9B;AAEE;AACI;AACP;AACmD;AAEhH;;;;;GAKG;AAkDH,IAAa,UAAU;IAQrB,oBAAmB,OAAsB,EAChC,SAAoB,EACnB,WAA8B,EAC9B,SAA0B,EAC1B,eAAgC,EAChC,cAAiC,EACjC,aAA4B,EAC5B,YAA0B,EAC1B,WAA8B;QARrB,YAAO,GAAP,OAAO,CAAe;QAChC,cAAS,GAAT,SAAS,CAAW;QACnB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAiB;QAChC,mBAAc,GAAd,cAAc,CAAmB;QACjC,kBAAa,GAAb,aAAa,CAAe;QAC5B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAmB;QAbxC,aAAQ,GAAc,EAAE,CAAC;QACzB,SAAI,GAAW,CAAC,CAAC;QACjB,aAAQ,GAAY,IAAI,CAAC;QAavB,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC;IACrC,CAAC;IAED,oCAAe,GAAf;QAAA,iBAKC;QAJC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,UAAC,QAAQ;YAC5E,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;YAC/B,KAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oCAAe,GAAf;QACE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAED,qCAAgB,GAAhB;QAAA,iBAMC;QALC,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,UAAC,MAAM;YAC/C,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACZ,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACpC,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAU,GAAV,UAAW,KAAK;QACd,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,EAAE;YACxD,cAAc,EAAE,IAAI,CAAC,cAAc;SACpC,CAAC,CAAC;QACH,OAAO,CAAC,OAAO,CAAC;YACd,EAAE,EAAE,KAAK;SACV,CAAC,CAAC;IACL,CAAC;IAED,mCAAc,GAAd,UAAe,cAAc;QAA7B,iBAiBC;QAhBC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACjC,KAAI,CAAC,IAAI,EAAE,CAAC;YACZ,KAAI,CAAC,aAAa,CAAC,WAAW,CAAC,KAAI,CAAC,cAAc,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,MAAiB;gBACpF,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAC7C,KAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;gBACpC,OAAO,EAAE,CAAC;gBACV,cAAc,CAAC,QAAQ,EAAE,CAAC;gBAC1B,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;oBACvB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACxB,CAAC;YACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gBACb,OAAO,EAAE,CAAC;gBACV,cAAc,CAAC,QAAQ,EAAE,CAAC;gBAC1B,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gCAAW,GAAX,UAAY,IAAa;QAAzB,iBAcC;QAbC,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACnC,OAAO,EAAE,YAAY;SACtB,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,CAAC,OAAO,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,UAAC,MAAiB;YACzE,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,KAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QACzB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;YACb,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,MAAM;QACR,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gCAAW,GAAX,UAAY,OAAgB;QAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE;YAC/B,SAAS,EAAE,OAAO,CAAC,EAAE;SACtB,CAAC,CAAC;IACL,CAAC;IAED,4BAAO,GAAP,UAAQ,KAAK;QACX,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvE,CAAC;IAED,8BAAS,GAAT,UAAU,GAAQ;QAChB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IAC5E,CAAC;IACH,iBAAC;AAAD,CAAC;AAlGY,UAAU;IA/CtB,wEAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,WAAW,EAAe;QAC1B,gFAAU,CAAE;YACV,mFACE,QAAc,EAAE;gBACd,+EAAU,CAAC,QAAQ,EAAE;oBACnB,4EAAM,CAAE,OAAO,EAAE,0EAAI;mBACkB;+FACvC;gBACF,+EAAU,CAAC,QAAQ,EAAE;oBACnB,4EAAM,CAAE,SAAS,0EAAE,YAAe,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;kBACsB;eACvE;wFAEL;YACD,mFACE,YAAoB;gBAClB,+EAAU,CAAC,QAAQ,EAAE;oBACnB,4EAAM,CAAE,SAAS,0EAAE,gBAAmB,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;mBACgB;+FACrE;gBACF,+EAAU,CAAC,QAAQ,EAAE;oBACnB,4EAAM,CAAE,SAAS,0EAAE,YAAe,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;kBACsB;eACvE;wFAEL;YACD,8EAAQ,mFAAe,EAAE;gBACvB,+EAAU,EAAE,KAAK,CAAC,EAAE,KAA8B;gBAClD,gFAAW,oFAAa;oBACtB,8EAAQ,EAAG,EAAE,SAAS,CAAC;wBACrB,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,mBAAmB,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;wBAChE,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,kBAAkB,EAAE,MAAM,EAAE,GAAM;uBACH;mBAC7D;+FACH;gBACF,gFAAW,oFAAa;oBACtB,8EAAQ,EAAG,EAAE,SAAS,CAAC;wBACrB,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,eAAe,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;wBAC5D,0EAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,mBAAmB,EAAE,MAAM,EAAE,GAAG,EAAG;uBACD;kBAChE;cACH;SACF;OACH;KACF,CAAC;yEASyC;QACrB,wEAAS;QACN,uEAAiB;QACnB,mFAAe;QACT,wEAAe;QAChB,gFAAiB;QAClB,8EAAa;QACd,wEAAY;QACb,OAAiB;AAkFzC;SAlGY,UAAU,e","file":"7.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\r\nimport { LocationService } from './../../services/location-service';\r\nimport { SearchFilterPage } from './../search-filter/search-filter';\r\nimport { SearchService } from './../../services/search-service';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SearchPage } from './search';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchPage,\r\n  ],\r\n  imports: [\r\n    ComponentsModule,\r\n    IonicPageModule.forChild(SearchPage),\r\n  ],\r\n  entryComponents: [\r\n  ]\r\n})\r\nexport class SearchPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { IonicModule } from 'ionic-angular';\r\nimport { NgModule } from '@angular/core';\r\nimport { ProjectCardComponent } from './project-card/project-card';\r\n@NgModule({\r\n\tdeclarations: [ProjectCardComponent],\r\n\timports: [IonicModule],\r\n\texports: [ProjectCardComponent]\r\n})\r\nexport class ComponentsModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Project } from './../../data/Project';\r\nimport { Component, Input } from '@angular/core';\r\nimport { trigger, style, animate, transition, state, keyframes } from '@angular/animations';\r\nimport { } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the ProjectCardComponent component.\r\n *\r\n * See https://angular.io/api/core/Component for more info on Angular\r\n * Components.\r\n */\r\n@Component({\r\n  selector: 'project-card',\r\n  templateUrl: 'project-card.html',\r\n  animations: [\r\n    trigger('cardAnimation', [\r\n      state('in', style({ transform: 'translateX(0)' })),\r\n      transition('void => *', [\r\n        animate(400, keyframes([\r\n          style({ opacity: 0, transform: 'translateX(-100%)', offset: 0 }),\r\n          style({ opacity: 1, transform: 'translateX(15px)', offset: 0.3 }),\r\n          style({ opacity: 1, transform: 'translateX(0)', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(400, keyframes([\r\n          style({ opacity: 1, transform: 'translateX(0)', offset: 0 }),\r\n          style({ opacity: 1, transform: 'translateX(-15px)', offset: 0.7 }),\r\n          style({ opacity: 0, transform: 'translateX(100%)', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class ProjectCardComponent {\r\n\r\n  @Input() project: Project;\r\n\r\n  text: string;\r\n\r\n  constructor() {\r\n    console.log('Hello ProjectCardComponent Component');\r\n    this.text = 'Hello World';\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/project-card/project-card.ts","import { ProjectCardComponent } from './../../components/project-card/project-card';\r\nimport { Project } from './../../data/Project';\r\nimport { trigger, style, animate, transition, state, keyframes } from '@angular/animations';\r\nimport { Tag } from './../../data/Tag';\r\nimport { LoginService } from './../../services/login-service';\r\nimport { SearchSettings } from './../../data/SearchSettings';\r\nimport { SearchService } from './../../services/search-service';\r\nimport { LocationService } from './../../services/location-service';\r\nimport { Component, ChangeDetectorRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, PopoverController, LoadingController } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the SearchPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-search',\r\n  templateUrl: 'search.html',\r\n  animations: [\r\n    trigger(\r\n      'tagAnimation', [\r\n        transition(':enter', [\r\n          style({ opacity: 0 }),\r\n          animate('600ms', style({ opacity: 1 }))\r\n        ]),\r\n        transition(':leave', [\r\n          style({ transform: 'translateY(0)', opacity: 1 }),\r\n          animate('200ms', style({ transform: 'translateY(-10px)', opacity: 0 }))\r\n        ])\r\n      ]\r\n    ),\r\n    trigger(\r\n      'spinnerAnimation', [\r\n        transition(':enter', [\r\n          style({ transform: 'translateY(-30px)', opacity: 0 }),\r\n          animate('400ms', style({ transform: 'translateY(0px)', opacity: 1 }))\r\n        ]),\r\n        transition(':leave', [\r\n          style({ transform: 'translateY(0)', opacity: 1 }),\r\n          animate('400ms', style({ transform: 'translateY(-30px)', opacity: 0 }))\r\n        ])\r\n      ]\r\n    ),\r\n    trigger('cardAnimation', [\r\n      state('in', style({ transform: 'translateX(0)' })),\r\n      transition('void => *', [\r\n        animate(400, keyframes([\r\n          style({ opacity: 0, transform: 'translateX(-100%)', offset: 0 }),\r\n          style({ opacity: 1, transform: 'translateX(15px)', offset: 0.3 }),\r\n          style({ opacity: 1, transform: 'translateX(0)', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(400, keyframes([\r\n          style({ opacity: 1, transform: 'translateX(0)', offset: 0 }),\r\n          style({ opacity: 1, transform: 'translateX(-15px)', offset: 0.7 }),\r\n          style({ opacity: 0, transform: 'translateX(100%)', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class SearchPage {\r\n\r\n  searchSettings: SearchSettings;\r\n  projects: Project[] = [];\r\n  page: number = 1;\r\n  infinity: boolean = true;\r\n  subscription;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private popOverCtrl: PopoverController,\r\n    private modalCtrl: ModalController,\r\n    private locationService: LocationService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private searchService: SearchService,\r\n    private loginService: LoginService,\r\n    private loadingCtrl: LoadingController\r\n  ) {\r\n    this.searchService.clearSettings();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.subscription = this.searchService.getSearchSettings().subscribe((settings) => {\r\n      this.searchSettings = settings;\r\n      this.startSearch();\r\n    });\r\n  }\r\n\r\n  ionViewDidLeave() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.loginService.freshAccessCheck().then((result) => {\r\n      if (!result) {\r\n        this.navCtrl.setRoot(\"LoginPage\");\r\n      }\r\n    });\r\n  }\r\n\r\n  openFilter(event) {\r\n    let popOver = this.popOverCtrl.create(\"SearchFilterPage\", {\r\n      searchSettings: this.searchSettings\r\n    });\r\n    popOver.present({\r\n      ev: event\r\n    });\r\n  }\r\n\r\n  paginateSearch(infiniteScroll): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.page++;\r\n      this.searchService.startSearch(this.searchSettings, this.page).then((result: Project[]) => {\r\n        this.projects = this.projects.concat(result);\r\n        this.changeDetector.detectChanges();\r\n        resolve();\r\n        infiniteScroll.complete();\r\n        if (result.length == 0) {\r\n          this.infinity = false;\r\n        }\r\n      }).catch((error) => {\r\n        resolve();\r\n        infiniteScroll.complete();\r\n        infiniteScroll.enable(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  startSearch(page?: Number) {\r\n    var loader = this.loadingCtrl.create({\r\n      content: \"Loading...\"\r\n    });\r\n    this.page = 1;\r\n    this.infinity = true;\r\n    loader.present();\r\n    this.searchService.startSearch(this.searchSettings).then((result: Project[]) => {\r\n      loader.dismiss();\r\n      this.projects = result;\r\n    }).catch((error) => {\r\n      loader.dismiss();\r\n      //TODO\r\n    });\r\n  }\r\n\r\n  openProject(project: Project) {\r\n    this.navCtrl.push(\"ProjectPage\", {\r\n      projectId: project.id\r\n    });\r\n  }\r\n\r\n  onInput(event) {\r\n    this.searchService.updateSearchSettings(\"query\", event.target.value);\r\n  }\r\n\r\n  removeTag(tag: Tag) {\r\n    this.searchSettings.tags.splice(this.searchSettings.tags.indexOf(tag), 1);\r\n    this.searchService.updateSearchSettings(\"tags\", this.searchSettings.tags);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}