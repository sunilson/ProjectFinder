{"version":3,"sources":["../../src/pages/search-place/search-place.module.ts","../../src/data/constants/ProjectConstants.ts","../../src/pages/search-place/search-place.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SearchPlacePage } from './search-place';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchPlacePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SearchPlacePage),\r\n  ],\r\n})\r\nexport class SearchPlacePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-place/search-place.module.ts","export class ProjectConstants {\r\n    public static START_LOCATION: Number[] = [48.3683495, 14.5128533];\r\n    public static REFRESH = {\r\n        projects: \"projects\"\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/constants/ProjectConstants.ts","import { ProjectConstants } from './../../data/constants/ProjectConstants';\r\nimport { Location } from './../../data/Location';\r\nimport { LocationService } from './../../services/location-service';\r\nimport { Component, ViewChild, ElementRef, Input } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController } from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\n/**\r\n * Generated class for the SearchPlacePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\ndeclare var google;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-search-place',\r\n  templateUrl: 'search-place.html',\r\n})\r\nexport class SearchPlacePage {\r\n\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map: any;\r\n  marker: any;\r\n  autocomplete: any;\r\n  placesService: any;\r\n  currentLocation: Location;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public geolocation: Geolocation,\r\n    private locationService: LocationService,\r\n    private loadingCtrl: LoadingController,\r\n    private toastCtrl: ToastController) {\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.loadMap();\r\n  }\r\n\r\n  loadMap() {\r\n\r\n    let latLng = new google.maps.LatLng(ProjectConstants.START_LOCATION[0], ProjectConstants.START_LOCATION[1]);\r\n\r\n    let styles = [\r\n      {\r\n        \"featureType\": \"administrative\",\r\n        \"elementType\": \"geometry\",\r\n        \"stylers\": [\r\n          {\r\n            \"visibility\": \"off\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"featureType\": \"poi\",\r\n        \"stylers\": [\r\n          {\r\n            \"visibility\": \"off\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"featureType\": \"road\",\r\n        \"elementType\": \"labels.icon\",\r\n        \"stylers\": [\r\n          {\r\n            \"visibility\": \"off\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"featureType\": \"transit\",\r\n        \"stylers\": [\r\n          {\r\n            \"visibility\": \"off\"\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n\r\n    let mapOptions = {\r\n      center: latLng,\r\n      zoom: 15,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n      styles: styles\r\n    }\r\n\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n    this.placesService = new google.maps.places.PlacesService(this.map);\r\n    this.marker = new google.maps.Marker({\r\n      position: latLng,\r\n      map: this.map\r\n    });\r\n\r\n    this.map.addListener('click', (e) => {\r\n      this.locationService.findPlaceName(e.latLng, this.map).then((name) => {\r\n        this.placeMarkerAndPanTo(e.latLng, this.map, name);\r\n      }).catch((e) => {\r\n        this.toastCtrl.create({\r\n          message: \"Couldn't get place details\",\r\n          duration: 3000\r\n        }).present();\r\n      });\r\n    });\r\n\r\n    let input = <HTMLInputElement>document.getElementById('search').getElementsByTagName('input')[0];\r\n    this.autocomplete = new google.maps.places.Autocomplete(input);\r\n\r\n    google.maps.event.addListener(this.autocomplete, 'place_changed', () => {\r\n      let place = this.autocomplete.getPlace();\r\n      let resultLatLng = new google.maps.LatLng(place.geometry.location.lat(), place.geometry.location.lng());\r\n      this.placeMarkerAndPanTo(resultLatLng, this.map, place.name);\r\n    });\r\n\r\n    this.locationService.findPlaceName(latLng, this.map).then((name) => {\r\n      this.currentLocation = new Location([ProjectConstants.START_LOCATION[0], ProjectConstants.START_LOCATION[1]], name);\r\n    }).catch((e) => {\r\n      this.toastCtrl.create({\r\n        message: \"Couldn't get place details\",\r\n        duration: 3000\r\n      }).present();\r\n    })\r\n  }\r\n\r\n  placeMarkerAndPanTo(latLng, map, name) {\r\n    this.currentLocation = new Location([latLng.lat() as Number, latLng.lng() as Number], name);\r\n    this.marker.setPosition(latLng);\r\n    map.panTo(latLng);\r\n  }\r\n\r\n  confirmLocation() {\r\n    if (this.currentLocation) {\r\n      this.locationService.notifiyLocationSelection(this.currentLocation);\r\n    }\r\n    this.navCtrl.pop();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-place/search-place.ts"],"sourceRoot":""}